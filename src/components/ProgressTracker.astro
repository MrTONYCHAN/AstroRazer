---
const { currentStep } = Astro.props;

const steps = [
  { id: 'cart', name: 'Shopping Cart', icon: 'cart' },
  { id: 'checkout', name: 'Payment', icon: 'payment' },
  { id: 'success', name: 'Confirmation', icon: 'success' },
];

const currentStepIndex = steps.findIndex(step => step.id === currentStep);
---

<nav aria-label="Progress" class="bg-gray-800/80 rounded-2xl shadow-xl p-6 backdrop-blur-lg border border-white/10">
  <ol role="list" class="flex items-center justify-between">
    {steps.map((step, stepIdx) => (
      <li class={`relative flex-1 ${stepIdx !== steps.length - 1 ? 'pr-8 sm:pr-20' : ''}`}>
        {stepIdx < currentStepIndex ? (
          <>
            <div class="absolute inset-0 flex items-center" aria-hidden="true">
              <div class="h-1 w-full bg-gradient-to-r from-purple-600 to-indigo-600 rounded-full"></div>
            </div>
            <span class="relative flex h-12 w-12 items-center justify-center bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full shadow-lg shadow-purple-500/30">
              <svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 6L9 17l-5-5"/>
              </svg>
              <span class="absolute top-14 text-sm font-medium text-purple-300 whitespace-nowrap">{step.name}</span>
            </span>
          </>
        ) : stepIdx === currentStepIndex ? (
          <>
            <div class="absolute inset-0 flex items-center" aria-hidden="true">
              <div class="h-1 w-full bg-gray-700 rounded-full"></div>
            </div>
            <span class="relative flex h-12 w-12 items-center justify-center bg-gray-700 rounded-full border-4 border-purple-500 shadow-lg shadow-purple-500/50 animate-pulse" aria-current="step">
              <span class="h-3 w-3 bg-purple-500 rounded-full" aria-hidden="true"></span>
              <span class="absolute top-14 text-sm font-medium text-purple-300 whitespace-nowrap">{step.name}</span>
            </span>
          </>
        ) : (
          <>
            <div class="absolute inset-0 flex items-center" aria-hidden="true">
              <div class="h-1 w-full bg-gray-700 rounded-full"></div>
            </div>
            <span class="relative flex h-12 w-12 items-center justify-center bg-gray-800 rounded-full border-2 border-gray-600 shadow-inner shadow-black/20">
              <span class="absolute top-14 text-sm font-medium text-gray-500 whitespace-nowrap">{step.name}</span>
            </span>
          </>
        )}
      </li>
    ))}
  </ol>
</nav>
